# A tutorial on vehicle control

[![Binder](https://mybinder.org/badge_logo.svg)](https://mybinder.org/v2/gh/christianausb/vehicleControl/HEAD)

-- upcoming --

Tutorial on: Vehicle path following and control

<img width="350" alt="Bildschirmfoto 2022-03-26 um 15 40 41" src="https://user-images.githubusercontent.com/4620523/160244474-e3a5005c-a445-4bdd-86d9-21cc6ecdd610.png"><img width="700" alt="Bildschirmfoto 2022-03-26 um 15 41 41" src="https://user-images.githubusercontent.com/4620523/160244501-a0db5bda-5c9b-4d05-bf5e-419f2cf07a92.png">



This project considers example implementations and demonstrations for several aspects of car-like vehicle control, motion/path planning, e.g., for autonomous driving purposes. The examples are implemented using model-based programming for dynamic systems in Python [Openrtdynamics](https://github.com/OpenRTDynamics/openrtdynamics2). Some modules are also exported to Simulink S-functions via automatic code generation.

Some theoretical details are described in [Path Tracking Control for Urban Autonomous Driving, Klauer et al., IFAC-WC 2020](https://www.sciencedirect.com/science/article/pii/S2405896320333218).

Topics include (to be further defined)

- Kinematic Bicycle Model (KBM) ✅ [bicycle-model](https://christianausb.github.io/vehicleControl/bicycle_model.html) 

- Lateral/Longitudinal acceleration

- Path following / steering control (basic)  ✅ [path-following control](https://christianausb.github.io/vehicleControl/path_following_control.html) 

- Path following / steering control based on path curvature ✅ [path-following control (curvature-based)](https://christianausb.github.io/vehicleControl/path_curvature_following_control.html) 

- Lateral dynamics ✅ [lateral dynamics](https://christianausb.github.io/vehicleControl/path_following_lateral_dynamics.html) 

- Path following (open-loop) ✅ [path-following open-loop control](https://christianausb.github.io/vehicleControl/path_following_open_loop_control.html) 

- Trajectory tracking control (adding velocity control to the path tracking controller)
- Frenet (curvilinear coordinate system) transformation of the KBM: ✅ [basic lateral motion planning](https://github.com/christianausb/vehicleControl/blob/main/lateral_path_transformation.ipynb) 
- Path planning using model-based optimal control ✅ [driving to given destination](https://github.com/christianausb/vehicleControl/blob/main/path_planning_to_goal.ipynb)
- Safety Functions
- Trailers

Further, this projects implements a path tracking module that can be used to track the projection of the vehicle position on a given path (the paths are dynamically extensible to enable endless driving). It allows to sample data like position, heading, and curvature from the path. Further, it allows to calculate the lateral distance to the path. This module is available (via generated c++ S-functions from Python) for controller design or simulation in Matlab/Simulink. You might consider the notebook [on code generation](https://github.com/christianausb/vehicleControl/blob/main/generate_simulink_blocks.ipynb) for more information. Simulink examples are given in the folder  
[sfunctions](https://github.com/christianausb/vehicleControl/blob/main/sfunctions).

Example tracks
--------------

Paths are encoded as arrays of position, heading, and curvature over a distance parameter. For example, tracks generated by the path optimization by TUM can be used directly:  

https://github.com/TUMFTM/global_racetrajectory_optimization.

Requirements
------------

- openrtdynamics2 (modelling of dynamic systems): $ pip install openrtdynamics2
- emscripten (https://emscripten.org/), the compiler command 'emcc' is needed to compile the autogenerated c++ code for the HTML-based demonstrations into WASM-binaries.
- casadi (a framework for optimization) $ pip install casadi


Run the HTML-based examples
---------------------------

Start a http-server to be able to access the *.html files, e.g.:

python3 -m http.server
